# Midnight Kitties - Compilation Instructions for Penny (WSL)

Hey Penny! John needs you to compile the Compact smart contract on your machine since Chuck's Haswell CPU is too old for the zkir component.

**All commands below are run in WSL (Ubuntu).**

## File Structure John Wants

WSL path (use this):
```
/mnt/c/Users/John/utils_Midnight/midnight-kitties_folder/
```

Windows equivalent:
```
C:\Users\John\utils_Midnight\midnight-kitties_folder\
```

## Prerequisites (in WSL)

1. **WSL2 with Ubuntu** - Open Windows Terminal → Ubuntu
2. **Node.js 18+** - Check with `node --version`
   - If missing: `curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash - && sudo apt-get install -y nodejs`
3. **Yarn** - Install with `npm install -g yarn` if needed
4. **Build tools** - `sudo apt-get install -y build-essential`
5. **Compact compiler** - See Step 3 below

## Step 1: Clone the Repo (in WSL terminal)

```bash
mkdir -p /mnt/c/Users/John/utils_Midnight
cd /mnt/c/Users/John/utils_Midnight
git clone https://github.com/bytewizard42i/midnight-kitties_johns-copy.git midnight-kitties_folder
cd midnight-kitties_folder
```

## Step 2: Install Dependencies

```bash
yarn install
```

## Step 3: Install Compact Compiler

If not already installed:
```bash
# Download and install the compact toolchain manager
curl -fsSL https://releases.midnight.network/compact/install.sh | bash

# Add to PATH (add this to ~/.bashrc for persistence)
export PATH="$HOME/.local/bin:$PATH"

# Install Compact v0.25.0 (required version)
compact update 0.25.0
```

## Step 4: Compile the Contract

```bash
cd packages/contracts/kitties

# Set the module resolution path for the monorepo
export COMPACT_PATH=".:./node_modules:../node_modules:../../node_modules:../../../node_modules"

# Compile!
compact compile src/kitties.compact src/managed/kitties
```

## Step 5: Screenshot

John needs a screenshot showing:
1. The compile command you entered
2. The compiler output (success or any errors)

Save it somewhere he can find it, or drop it in the PixyPi folder.

## Expected Output

On success, you should see something like:
```
Compiling 16 circuits:
  circuit "approve" ✓
  circuit "breed" ✓
  ... (more circuits)
```

And new files will appear in `packages/contracts/kitties/src/managed/kitties/`

## Troubleshooting

- **zkir crash / SIGILL**: Your CPU might also be too old (needs Skylake 6th gen or newer)
- **Module not found**: Make sure COMPACT_PATH is set correctly
- **yarn errors**: Try `rm -rf node_modules && yarn install`

---

*Generated by Cassie on Chuck - Dec 13, 2025*
*Chuck's i7-4770 (Haswell) can't run zkir, so we're counting on you!*
